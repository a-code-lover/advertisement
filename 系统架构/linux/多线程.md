## 进程与线程的区别

1. 逻辑上来说，一组线程属于一个进程，或者说一个进程可以包含很多线程。为了实现并发，一个进程中可以起很多个线程。这些线程协作完成进程的运行逻辑;
2. 对操作系统而言，进程是资源分配的基本单元，线程是cpu调度的基本单元;比如一个进程内的所有线程共享同一个地址空间，而不同进程的地址空间是相互独立的;
3. 从通信上来说，进程间通信IPC，线程间可以直接读写进程数据段（如全局变量）来进行通信——需要进程同步和互斥手段的辅助，以保证数据的一致性;
4. 从线程模型来看，用户级线程与内核线程的对应关系有1:1, N:1, M:N等.前两者分别可以叫做用户级线程和内核级线程。用户级线程并不能真正做到并行，所以主要用的还是内核级线程。而M:N这种模型在Golang的goroutine中得以实现。更详细的描述请参考Goroutine并发调度模型深度解析&手撸一个协程池.还可以看goroutine背后的系统知识.
5. 从实现上来说，以linux为例。用户视角下的线程在内核中实际实现是进程，每个线程都有独立的task_struct对象，独立调度切换。用户视角下的进程需要内核配合用户空间来模拟出来，比如一个线程调用getpid()返回的不是自己所在的调度实体的pid,而是tgid(线程组id.)
6. 在使用中，进程创建一般通过fork()系统调用实现，而线程创建一般调用pthread库中的pthread_create().

参考：
[linux线程实现机制分析]<https://www.ibm.com/developerworks/cn/linux/kernel/l-thread/>

面试回答：

1.进程是资源分配的最小单位，线程是程序执行的最小单位。
2.进程有自己的独立地址空间，每启动一个进程，系统就会为它分配地址空间，建立数据表来维护代码段、堆栈段和数据段，这种操作非常昂贵。而线程是共享进程中的数据的，使用相同的地址空间，因此CPU切换一个线程的花费远比进程要小很多，同时创建一个线程的开销也比进程要小很多。
3.线程之间的通信更方便，同一进程下的线程共享全局变量、静态变量等数据，而进程之间的通信需要以通信的方式（IPC)进行。不过如何处理好同步与互斥是编写多线程程序的难点。
4.但是多进程程序更健壮，多线程程序只要有一个线程死掉，整个进程也死掉了，而一个进程死掉并不会对另外一个进程造成影响，因为进程有自己独立的地址空间。

### 并行和并发

并行：多个处理器或者多核处理器同时执行多个不同的任务。
并发：一个处理器处理多个任务。

### 线程的基本状态及状态间关系

### 多线程的几种实现方式

+ linux pthread库
+ Windows win32 api
+ c++线程库thread

### 多线程的优缺点

优点：
提高程序的执行效率；提高资源利用率（cpu&内存）;

缺点：
线程频繁上下文切换开销；线程安全（互斥同步）；复杂

### 多线程同步和互斥的几种实现方式

+ 信号量
+ 互斥量
+ 事件：通过通知操作的方式来保持线程的同步，还可以方便实现对多个线程的优先级比较的操作

### 多线程的同步和互斥的区别，什么情况下使用，举例说明。

+ 所谓互斥，就是不同线程通过竞争进入临界区（共享的数据和硬件资源），为了防止访问冲突，在有限的时间内只允许其中之一独占性的使用共享资源。如不允许同时写。
+ 同步关系则是多个线程彼此合作，通过一定的逻辑关系来共同完成一个任务。一般来说，同步关系中往往包含互斥，同时对临界区的资源会按照某种逻辑顺序进行访问。如先生产后使用。

### 互斥量与临界区的区别

临界区：通过对多线程的串行化来访问公共资源或一段代码，速度快，适合控制数据访问。在任意时刻只允许一个线程对共享资源进行访问，如果有多个线程试图访问公共资源，那么在有一个线程进入后，其他试图访问公共资源的线程将被挂起，并一直等到进入临界区的线程离开，临界区在被释放后，其他线程才可以抢占。

互斥量：采用互斥对象机制。 只有拥有互斥对象的线程才有访问公共资源的权限，因为互斥对象只有一个，所以能保证公共资源不会同时被多个线程访问。互斥不仅能实现同一应用程序的公共资源安全共享，还能实现不同应用程序的公共资源安全共享

### 多线程按顺序打印ID，循环10次

### 生产者消费者模型

### 读者写者模型

### 多线程和多进程对比的优缺点

参考：
[多线程有什么用](https://www.zhihu.com/question/19901763)
[多线程和多进程的选择](https://www.zhihu.com/question/19901763)
[Linux下多线程和多进程程序的优缺点](https://zhidao.baidu.com/question/1767389138339419740.html)