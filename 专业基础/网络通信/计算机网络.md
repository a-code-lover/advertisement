# 计算机网络

[常见题目](https://blog.csdn.net/justloveyou_/article/details/78303617)
[头部格式](https://blog.csdn.net/star19830909/article/details/70792209)
[http头部信息](https://jjayyyyyyy.github.io/2017/05/01/HTTP_headers.html)
[LFN](https://pioneerlfn.github.io/2019/01/21/interview-memo/)

> MSS：TCP数据包每次能够传输的最大数据分段。MTU：最大传输单元
> rtt：round-trip time
> SWS：糊涂窗口综合症
> [nagle算法](https://yq.aliyun.com/articles/228910)：拥塞控制
> TCP_CORK：提供利用率

## 问题：

+ ping用到哪些协议？
+ 发送大文件是客户端和服务端采用什么机制？
+ 如果让你设计一个下载器中的断点续传功能，你打算怎么设计，会有哪些问题?
+ [单点登录](https://yq.aliyun.com/articles/636281)

## tcp/udp

1.tcp与udp的区别？

tcp是在不可靠的IP层上实现可靠的数据传输协议，主要解决传输的可靠、有序、无丢失、不重复的问题。特点包括：

+ tcp是面向连接的传输层协议；
+ 提供可靠交付，保证数据的可靠、有序、无丢失、不重复；
+ 面向字节流，虽然应用程序和tcp交付的是大小不等的数据块，但tcp把应用程序交付下来的数据看成一连串无结构的字节流。
+ 每一个tcp连接只能是点对点的(一对一)，tcp连接的端点是套接字;
+ 提供全双工通信，连接的两端设有发送缓存和接受缓存，用来临时存放数据，双方随时发送数据
  + 发送缓存暂存：发送应用程序准备发送的数据和tcp已发送但未收到确认的数据；
  + 接收缓存暂存：按序到达但未被应用读取的数据和未按序到达的数据；

[udp](https://blog.csdn.net/star19830909/article/details/70792209)只在ip上增加了两个基本服务：复用和分用以及差错检测，如果使用udp则应用几乎是直接与ip打交道。

+ 不需建立连接，无连接状态，不需维护（缓存，拥塞参数，序号，确认号等）
+ udp不提供可靠交付，并不意味着应用对数据要求是不可靠的，而是维护传输可靠性的工作需要用户在应用层完成，应用根据需求灵活调整机制；
+ 面向报文，对应用层交付下来的报文，直接添加首部后交付给ip层，不合并不拆分；接收方对ip层交付的报文，直接去除udp首部，原封不动交付给上层应用。因此报文不可分割，是udp数据报处理的最小单位。
+ udp可以多对一通信；
+ udp开销小（不建立连接，不维护连接，头部8字节），对于某些实时应用功能要求以稳定的速度发送（不进行拥塞控制），能容忍一些数据丢失（可靠性），但不允许较大时延（拥塞控制导致时延），而udp正满足需求，如IP电话，流媒体，视频会议等。

2.tcp的三次握手，四次挥手？

[TCP的三次握手与四次挥手](https://blog.csdn.net/qq_38950316/article/details/81087809)
[连接建立与释放](img/连接建立与释放.png)

连接建立主要解决三个问题：

+ 使每一方都能确认对方的存在；
+ 允许双方协商参数（如最大窗口值，是否使用窗口扩大，时间戳以及服务质量等）；
+ 能够对传输实体资源（如缓存大小，连接表中的项目等）进行分配；

补充：服务端的资源是在完成第二次握手时分配的，客户端的资源是在完成第三次握手时分配的。这使得服务器易受SYN泛洪攻击。

3.tcp如何保证可靠？

+ 序号：每个报文段都带有发送数据第一个字节的序号；
+ 确认：tcp首部的确认号是期待收到对方下一个报文段数据的第一个字节号，默认使用累计确认；
+ 重传：每个报文段设置一个计时器，超时未接收到确认回复则重传；冗余ACK（冗余确认），tcp规定对接收到的失序报文发送冗余ACK。

4.拥塞控制：拥塞控制是全网的，涉及所有主机和路由；流量控制是端对端的，只涉及到两端。

+ [慢开始和拥塞避免](img/慢开始与tcp免.png)
+ [快重传和快恢复](img/快恢复.pngtcp

5.tcp流量控制：消除发送方使接收方tcp溢出的可能性，速度匹配

+ 滑动窗口：发送窗口的实际大小是tcp（接收方能接收缓存大小）和拥塞窗口（网络接收容量）的最小值；

6.应用与端口

tcp:ftp，http，telnet
udp:tftp(小文件)，DNS，SNMP，RTP(实时协议)，DHCP(ip分配)，RIP(路由选择)

ftp：21，telnet:23，smtp：25，dns：53，http：80，snmp:161

## ip

1.路由主要负责功能是**路由选择**和**分组转发**，路由选择算法可分为静态路由算法和动态路由算法：静态路由算法由网管手动配置路由信息，主要用于高度安全性的军事系统和较小的商业；常用的动态路由算法分为**距离-向量算法**和**链路状态算法**两类。

+ 距离-向量路由算法：如RIP
+ 链路状态路由算法：如OSPF

比较：在距离-向量算法中，每个节点仅与它的直接邻居交谈，为邻居提供从自己到网络中所有其他节点的最低费用估算；在链路算法中，每个节点通过广播的方式与其他所有节点交谈，仅告知直接相连的链路的费用。相比之下，距离-向量算法可能遇到路由环路的问题。

2.一个自治系统（包含多个局域网）内部所使用的路由选择协议称为内部网关协议（IGP），具体协议如RIP，OSPF等；自治系统之间使用的协议称为外部网关协议（EGP），具体协议如BGP。

3.[5类ipv4地址,子网划分与CIDR](https://blog.csdn.net/lee_feiyue/article/details/79661590)

4.NAT网络地址转换，将内部ip转换为公用ip。

5.ARP，DHCP，ICMP

## http

1. 浏览器分析链接指向的URL；
2. 浏览器向DNS请求解析baidu.com的IP地址；
3. 域名系统DNS解析出百度服务器的IP地址，并返回；
4. 浏览器与服务器建立tcp连接；
5. 浏览器向服务器发出http请求：get index.html;
6. 服务器通过http响应发网页发给浏览器；
7. tcp连接释放；
8. 浏览器将页码解析，显示给用户；

1.对于非持久连接，每一个网页元素对象（比如jpg,flash等）都要单独建立tcp连接。HTTP/1.1支持持久连接，1.0不支持。

2.[http状态码](http://www.runoob.com/http/http-status-codes.html)

3.[数据报格式](https://www.cnblogs.com/chris-cp/p/5082514.html)
get：请求读取由url标志的信息；
post：将请求参数封装到报文中；
head：请求读取由url所标志的信息首部；
connect：用于代理服务器。

5.[keep-alive](https://caofengbin.github.io/2018/03/16/dhcp-and-nat/#长连接及心跳保活原理简介)

6.[session和cookie](https://www.cnblogs.com/andy-zhou/p/5360107.html)
[http的状态是什么？](https://www.cnblogs.com/bellkosmos/p/5237146.html)

## https

[HTTPS和HTTP的区别](https://www.cnblogs.com/wqhwe/p/5407468.html)主要为以下四点：

+ https协议需要到ca申请证书，一般免费证书很少，需要交费。
+ http是超文本传输协议，信息是明文传输，https 则是具有安全性的ssl加密传输协议。
+ http和https使用的是完全不同的连接方式，用的端口也不一样，前者是80，后者是443。
+ http的连接很简单，是无状态的；HTTPS协议是由SSL+HTTP协议构建的可进行加密传输、身份认证的网络协议，比http协议安全。

[SSL与TLS](http://www.ruanyifeng.com/blog/2014/09/illustration-ssl.html)

## socket